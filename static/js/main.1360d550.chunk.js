(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{27:function(e,t,o){},36:function(e,t,o){},37:function(e,t,o){"use strict";o.r(t);var n=o(2),a=o.n(n),s=o(21),c=o.n(s),r=o(4),i=o(5),l=o(7),u=o(6),h=o(15),j="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8)),console.log("token:",{token:b});var d={Accept:"application/json",Authorization:b,cache:"no-store"},k=(o(27),o(3)),O=o(12),v=o(0),p=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){return Object(r.a)(this,o),t.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"open-search",children:Object(v.jsx)(O.b,{to:"searchPage",children:Object(v.jsx)("div",{children:"Add a Book"})})})}}]),o}(n.Component),f=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){return Object(r.a)(this,o),t.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"list-books-title",children:Object(v.jsx)("h1",{children:"MyReads"})})}}]),o}(n.Component),m=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){var e;Object(r.a)(this,o);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={value:e.props.aBookCaseKey},e.handleChange=function(t){var o=t.target.value;e.setState({value:o}),e.props.onMove(e.props.aBook,o)},e}return Object(i.a)(o,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"book-shelf-changer",children:Object(v.jsxs)("select",{value:this.state.value,onChange:this.handleChange,children:[Object(v.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(v.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(v.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(v.jsx)("option",{value:"read",children:"Read"}),Object(v.jsx)("option",{value:"none",children:"None"})]})})}}]),o}(n.Component),y=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){return Object(r.a)(this,o),t.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){var e=this.props,t=e.aBook,o=e.aBookCaseKey,n=e.onMove;return Object(v.jsx)("li",{children:Object(v.jsxs)("div",{className:"book",children:[Object(v.jsxs)("div",{className:"book-top",children:[Object(v.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks?t.imageLinks.thumbnail:"icons/book-placeholder.svg",")")}}),Object(v.jsx)(m,{aBook:t,aBookCaseKey:o,onMove:n})]}),Object(v.jsx)("div",{className:"book-title",children:t.title}),Object(v.jsx)("div",{className:"book-authors",children:t.authors?t.authors.join(", "):"Unknown Author"})]})})}}]),o}(n.Component),x=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){return Object(r.a)(this,o),t.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){var e=this.props,t=e.aBookCase,o=e.allBooks,n=e.onMove;console.log("Check filter: ",this.props);var a=o.filter((function(e){if(e.shelf===t.bookCaseKey)return e}));return Object(v.jsxs)("div",{className:"bookshelf",children:[Object(v.jsx)("h2",{className:"bookshelf-title",children:t.bookCaseName}),Object(v.jsx)("div",{className:"bookshelf-books",children:Object(v.jsx)("ol",{className:"books-grid",children:a.map((function(e){return Object(v.jsx)(y,{aBook:e,aBookCaseKey:t.bookCaseKey,onMove:n},e.id)}))})})]})}}]),o}(n.Component),C=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){return Object(r.a)(this,o),t.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){var e=this.props,t=e.bookCase,o=e.allBooks,n=e.onMove;return Object(v.jsx)("div",{children:t.map((function(e){return Object(v.jsx)(x,{aBookCase:e,allBooks:o,onMove:n},e.bookCaseKey)}))})}}]),o}(n.Component),B=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){return Object(r.a)(this,o),t.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){var e=this.props,t=e.bookCase,o=e.allBooks,n=e.onMove;return Object(v.jsxs)("div",{className:"list-books",children:[Object(v.jsx)(f,{}),Object(v.jsx)("div",{className:"list-books-content",children:Object(v.jsx)(C,{bookCase:t,allBooks:o,onMove:n})}),Object(v.jsx)(p,{})]})}}]),o}(n.Component),g=function(e){var t=e.searchBooks,o=e.myBooks,n=e.onMove,a=t.map((function(e){return o.map((function(t){return t.id===e.id&&(e.shelf=t.shelf),t})),e}));return Object(v.jsx)("div",{className:"search-books-results",children:Object(v.jsx)("ol",{className:"books-grid",children:a.map((function(e){return Object(v.jsx)(y,{aBook:e,aBookCaseKey:e.shelf,onMove:n},e.id)}))})})},N=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){var e;Object(r.a)(this,o);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={value:""},e.handleChange=function(t){var o=t.target.value;e.setState({value:o},(function(){e.props.onSearch(o)}))},e}return Object(i.a)(o,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"search-books-input-wrapper",children:Object(v.jsx)("input",{type:"text",value:this.state.value,placeholder:"Search by title or author",onChange:this.handleChange,autoFocus:!0})})}}]),o}(n.Component),S=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(){return Object(r.a)(this,o),t.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){var e=this.props,t=e.searchBooks,o=e.myBooks,n=e.onSearch,a=e.onResetSearch,s=e.onMove;e.aBookCase;return Object(v.jsxs)("div",{className:"search-books",children:[Object(v.jsxs)("div",{className:"search-books-bar",children:[Object(v.jsx)(O.b,{to:"/",children:Object(v.jsx)("button",{className:"close-search",onClick:a,children:"Close"})}),Object(v.jsx)(N,{onSearch:n})]}),Object(v.jsx)(g,{searchBooks:t,myBooks:o,onMove:s})]})}}]),o}(n.Component),M=function(e){Object(l.a)(o,e);var t=Object(u.a)(o);function o(e){var n;return Object(r.a)(this,o),(n=t.call(this,e)).componentDidMount=function(){fetch("".concat(j,"/books"),{headers:d}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){n.setState({allBooks:e})}))},n.search=function(e){var t,o;(t=e,fetch("".concat(j,"/search"),{method:"POST",headers:Object(h.a)(Object(h.a)({},d),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:t,maxResults:o})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){n.setState({searchResult:e})}))},n.reset=function(){n.setState({searchResult:[]})},n.moveBook=function(e,t){console.log("book+++++++",e),function(e,t){fetch("".concat(j,"/books/").concat(e),{method:"PUT",headers:Object(h.a)(Object(h.a)({},d),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(e,t),"none"===t?n.setState((function(t){return{allBooks:t.allBooks.filter((function(t){return t.id!==e.id}))}})):(e.shelf=t,n.setState((function(t){return{allBooks:t.allBooks.filter((function(t){if(t.id!==e.id)return t})).concat(e)}})))},n.state={allBooks:[],bookCase:[{bookCaseKey:"currentlyReading",bookCaseName:"Currently Reading"},{bookCaseKey:"wantToRead",bookCaseName:"Want to Read"},{bookCaseKey:"read",bookCaseName:"Read"}],searchResult:[]},n}return Object(i.a)(o,[{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"app",children:[Object(v.jsx)(k.a,{exact:!0,path:"/",render:function(){return Object(v.jsx)(B,{bookCase:e.state.bookCase,allBooks:e.state.allBooks,onMove:e.moveBook})}}),Object(v.jsx)(k.a,{path:"/searchPage",render:function(){return Object(v.jsx)(S,{searchBooks:e.state.searchResult,myBooks:e.state.allBooks,onSearch:e.search,onMove:e.moveBook,onResetSearch:e.reset})}})]})}}]),o}(a.a.Component);o(36);c.a.render(Object(v.jsx)(O.a,{children:Object(v.jsx)(M,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.1360d550.chunk.js.map